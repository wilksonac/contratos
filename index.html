<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Contratos de Prestação de Serviços</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .form-input:focus {
            ring: 2px;
            ring-offset: 2px;
        }
        .tab-button {
            transition: all 0.3s;
        }
        .tab-button.active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        
        /* Estilos para o Contrato Gerado */
        #contractOutput {
            font-family: 'Georgia', serif;
            color: #333;
            line-height: 1.6;
            background-color: #fff;
            padding: 2rem 2.5rem;
            border: 1px solid #e2e8f0;
        }
        #contractOutput h1 {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 2.5rem;
            text-transform: uppercase;
            color: #1a202c;
            letter-spacing: 1px;
        }
        #contractOutput h2 {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #cbd5e0;
            padding-bottom: 0.25rem;
            color: #2d3748;
        }
        #contractOutput p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        #contractOutput strong {
            font-weight: 600;
            color: #2d3748;
        }
        #contractOutput .signature-section {
            margin-top: 4rem;
            text-align: center;
        }
        #contractOutput .signature-line {
            border-bottom: 1px solid #4a5568;
            width: 300px;
            margin: 0 auto 0.5rem auto;
        }
        #contractOutput .signature-name {
            font-size: 0.9rem;
            font-weight: bold;
        }
        #contractOutput .signature-doc {
            font-size: 0.8rem;
            color: #4a5568;
        }
        #contractOutput .date-location {
            text-align: center;
            margin-top: 3rem;
            font-size: 0.95rem;
        }

        @media print {
            body * {
                visibility: hidden;
            }
            #contractOutput, #contractOutput * {
                visibility: visible;
            }
            #contractOutput {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 sm:p-8">
    <div class="max-w-5xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Gerador de Contratos</h1>
            <p class="text-gray-600 mt-2">Preencha os campos para gerar seu contrato de prestação de serviços.</p>
        </header>

        <main class="bg-white p-6 sm:p-8 rounded-xl shadow-md">
            <!-- Abas de Navegação -->
            <div class="mb-6 border-b border-gray-200">
                <nav class="flex -mb-px space-x-4" aria-label="Tabs">
                    <button id="tab-form" class="tab-button active whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm">Formulário Detalhado</button>
                    <button id="tab-text" class="tab-button whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Entrada Rápida por Texto</button>
                </nav>
            </div>

            <form id="contractForm">
                <!-- Conteúdo da Aba Formulário -->
                <div id="content-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                        <!-- Coluna Esquerda: Detalhes do Contrato e Financeiro -->
                        <div class="space-y-6">
                            <section>
                                <h2 class="text-xl font-semibold mb-4 border-b pb-2 text-blue-600">Detalhes do Contrato</h2>
                                <div class="space-y-4">
                                    <div>
                                        <label for="contractType" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Contrato</label>
                                        <select id="contractType" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
                                            <option value="" disabled selected>Selecione o tipo...</option>
                                            <option value="1">Festa Infantil</option>
                                            <option value="6">Formatura Infantil</option>
                                            <option value="2">Casamento</option>
                                            <option value="3">Casamento Civil</option>
                                            <option value="4">Eventos em Geral</option>
                                            <option value="5">Entrada de Dados</option>
                                        </select>
                                    </div>
                                    <div id="eventDetails" class="space-y-4">
                                        <div>
                                            <label for="eventDate" class="block text-sm font-medium text-gray-700 mb-1">Data do Evento Principal (Baile/Festa)</o>
                                            <input type="date" id="eventDate" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                        </div>
                                         <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <div>
                                                <label for="eventTime" class="block text-sm font-medium text-gray-700 mb-1">Hora de Início</label>
                                                <input type="time" id="eventTime" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            <div>
                                                <label for="eventDuration" class="block text-sm font-medium text-gray-700 mb-1">Duração (horas)</label>
                                                <input type="number" id="eventDuration" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: 4">
                                            </div>
                                        </div>
                                        <div>
                                            <label for="eventLocal" class="block text-sm font-medium text-gray-700 mb-1">Local do Evento Principal</label>
                                            <input type="text" id="eventLocal" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Salão de Festas X">
                                        </div>
                                    </div>
                                     <div id="weddingPackageSection" class="hidden">
                                        <label for="weddingPackage" class="block text-sm font-medium text-gray-700 mb-1">Pacote de Casamento</label>
                                        <select id="weddingPackage" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                            <option value="" disabled selected>Selecione um pacote...</option>
                                            <option value="AMOR ETERNO (4x de R$ 1.050,00)">AMOR ETERNO (4x de R$ 1.050,00)</option>
                                            <option value="ALIANÇAS DOURADAS (4x de R$ 925,00)">ALIANÇAS DOURADAS (4x de R$ 925,00)</option>
                                            <option value="LUA DE MEL (3x de R$ 950,00)">LUA DE MEL (3x de R$ 950,00)</option>
                                            <option value="MEMÓRIAS (3x de R$ 800,00)">MEMÓRIAS (3x de R$ 800,00)</option>
                                        </select>
                                    </div>
                                    <div id="infantilPackageSection" class="hidden">
                                        <label for="infantilPackage" class="block text-sm font-medium text-gray-700 mb-1">Pacote Festa Infantil</label>
                                        <select id="infantilPackage" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                            <option value="" disabled selected>Selecione um pacote...</option>
                                            <option value="Diamante (4x de R$ 650,00)">Diamante (4x de R$ 650,00)</option>
                                            <option value="Ouro (3x de R$ 600,00)">Ouro (3x de R$ 600,00)</option>
                                            <option value="Prata (2x de R$ 600,00)">Prata (2x de R$ 600,00)</option>
                                            <option value="Bronze (2x de R$ 550,00)">Bronze (2x de R$ 550,00)</option>
                                        </select>
                                    </div>
                                    <div id="civilPackageSection" class="hidden">
                                        <label for="civilPackage" class="block text-sm font-medium text-gray-700 mb-1">Pacote Casamento Civil</label>
                                        <select id="civilPackage" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                            <option value="" disabled selected>Selecione um pacote...</option>
                                            <option value="Tradicional (2x de R$ 600,00)">Tradicional (2x de R$ 600,00)</option>
                                            <option value="Premium (2x de R$ 750,00)">Premium (2x de R$ 750,00)</option>
                                            <option value="Super Premium (3x de R$ 800,00)">Super Premium (3x de R$ 800,00)</option>
                                        </select>
                                    </div>
                                    <div id="formaturaPackageSection" class="hidden">
                                        <label for="formaturaPackage" class="block text-sm font-medium text-gray-700 mb-1">Pacote Formatura Infantil</label>
                                        <select id="formaturaPackage" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                            <option value="" disabled selected>Selecione um pacote...</option>
                                            <option value="Dei Bambini (4x de R$ 649,00)">Dei Bambini (4x de R$ 649,00)</option>
                                            <option value="Nana Coc (4x de R$ 499,00)">Nana Coc (4x de R$ 499,00)</option>
                                            <option value="Lepetit (4x de R$ 499,00)">Lepetit (4x de R$ 499,00)</option>
                                            <option value="ABC (4x de R$ 299,00)">ABC (4x de R$ 299,00)</option>
                                        </select>
                                    </div>
                                     <div>
                                        <label for="package" class="block text-sm font-medium text-gray-700 mb-1">Descrição do Serviço / Observações</label>
                                        <textarea id="package" rows="3" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Descreva o serviço ou adicione itens não inclusos no pacote."></textarea>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2 class="text-xl font-semibold mt-6 mb-4 border-b pb-2 text-blue-600">Detalhes Financeiros</h2>
                                <div class="space-y-4">
                                   <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <div>
                                            <label for="value" class="block text-sm font-medium text-gray-700 mb-1">Valor do Contrato (R$)</label>
                                            <input type="number" id="value" step="0.01" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="2596.00" required>
                                        </div>
                                        <div>
                                            <label for="paymentMethod" class="block text-sm font-medium text-gray-700 mb-1">Forma de Pagamento</label>
                                            <input type="text" id="paymentMethod" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: 4x no cartão..." required>
                                        </div>
                                   </div>
                                     <div>
                                        <label for="rules" class="block text-sm font-medium text-gray-700 mb-1">Regras e Cláusulas Adicionais</label>
                                        <textarea id="rules" rows="3" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: Prazo de entrega do material: 60 dias."></textarea>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <!-- Coluna Direita: Dados do Contratante -->
                        <section>
                             <h2 class="text-xl font-semibold mb-4 border-b pb-2 text-green-600">Dados do Contratante</h2>
                            <div class="space-y-4">
                                <div>
                                    <label id="clientNameLabel" for="clientName" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                                    <input type="text" id="clientName" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="Nome do Cliente" required>
                                </div>
                                <div id="formaturaStudentDetails" class="hidden space-y-4">
                                    <input type="text" id="studentName" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="Nome do Formando(a)">
                                    <input type="text" id="studentClass" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="Turma">
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <input type="text" id="clientCPF" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="CPF" required>
                                    <input type="text" id="clientRG" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="RG">
                                </div>
                                <input type="text" id="clientAddress" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="Endereço Completo com CEP" required>
                                <input type="email" id="clientEmail" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="E-mail" required>
                                <input type="tel" id="clientPhone" class="w-full form-input p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500" placeholder="Telefone com DDD" required>
                                <div class="pt-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="imageRights" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                        <span class="ml-2 text-sm text-gray-700">Autoriza o uso de imagem para portfólio?</span>
                                    </label>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- Conteúdo da Aba Texto Rápido -->
                <div id="content-text" class="hidden">
                    <label for="quickText" class="block text-sm font-medium text-gray-700 mb-2">Entrada de Dados Rápida</label>
                    <p class="text-xs text-gray-500 mb-3">Complete os dados abaixo. O sistema irá distribuir as informações automaticamente no contrato selecionado.</p>
                    <textarea id="quickText" rows="15" class="w-full form-input p-3 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>

                <div class="mt-8 text-center">
                    <button type="button" id="generateButton" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-10 rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300">
                        Gerar Contrato
                    </button>
                </div>
            </form>
        </main>
        
        <section id="outputSection" class="mt-10 bg-white p-6 sm:p-8 rounded-xl shadow-md hidden">
            <h2 class="text-2xl font-bold text-center mb-6">Contrato Gerado</h2>
            <div id="contractOutput" class="bg-white rounded-lg"></div>
            <div class="mt-6 flex flex-col sm:flex-row justify-center items-center gap-4 no-print">
                <button id="copyButton" class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg">Copiar Texto</button>
                <button id="printButton" class="w-full sm:w-auto bg-gray-700 hover:bg-gray-800 text-white font-bold py-2 px-6 rounded-lg">Imprimir / Salvar PDF</button>
            </div>
            <div id="copySuccess" class="mt-4 text-center text-green-600 font-medium hidden">Contrato copiado!</div>
        </section>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>&copy; 2024 Gerador de Contratos. Ferramenta para auxílio na criação de documentos.</p>
        </footer>
    </div>

    <script>
        const tabForm = document.getElementById('tab-form');
        const tabText = document.getElementById('tab-text');
        const contentForm = document.getElementById('content-form');
        const contentText = document.getElementById('content-text');
        const contractForm = document.getElementById('contractForm');
        const generateButton = document.getElementById('generateButton');
        const outputSection = document.getElementById('outputSection');
        const contractOutput = document.getElementById('contractOutput');
        const quickText = document.getElementById('quickText');
        
        let activeTab = 'form';

        // Lógica de troca de abas
        tabForm.addEventListener('click', () => {
            activeTab = 'form';
            tabForm.classList.add('active');
            tabText.classList.remove('active');
            contentForm.classList.remove('hidden');
            contentText.classList.add('hidden');
        });

        tabText.addEventListener('click', () => {
            activeTab = 'text';
            tabText.classList.add('active');
            tabForm.classList.remove('active');
            contentText.classList.remove('hidden');
            contentForm.classList.add('hidden');
        });

        // Ocultar/mostrar campos de evento e atualizar template de texto rápido
        document.getElementById('contractType').addEventListener('change', (e) => {
            const eventDetails = document.getElementById('eventDetails');
            const weddingPackageSection = document.getElementById('weddingPackageSection');
            const infantilPackageSection = document.getElementById('infantilPackageSection');
            const civilPackageSection = document.getElementById('civilPackageSection');
            const formaturaPackageSection = document.getElementById('formaturaPackageSection');
            const formaturaStudentDetails = document.getElementById('formaturaStudentDetails');
            const packageLabel = document.querySelector('label[for="package"]');
            const packageTextarea = document.getElementById('package');
            const clientNameLabel = document.getElementById('clientNameLabel');
            
            // Reset visibility and labels
            weddingPackageSection.classList.add('hidden');
            infantilPackageSection.classList.add('hidden');
            civilPackageSection.classList.add('hidden');
            formaturaPackageSection.classList.add('hidden');
            formaturaStudentDetails.classList.add('hidden');
            eventDetails.classList.remove('hidden');
            clientNameLabel.textContent = 'Nome Completo';
            document.getElementById('clientName').placeholder = 'Nome do Cliente';
            document.querySelector('label[for="eventDate"]').textContent = 'Data do Evento';


            packageLabel.textContent = 'Descrição do Serviço / Observações';
            packageTextarea.placeholder = 'Descreva o serviço ou adicione itens não inclusos no pacote.';
            packageTextarea.required = true;
            
            let template = 'Selecione um tipo de contrato para ver o modelo de entrada rápida.';

            switch(e.target.value) {
                case '1': // Festa Infantil
                    infantilPackageSection.classList.remove('hidden');
                    packageTextarea.required = false;
                    template = `Tipo de Contrato: Festa Infantil
Nome Completo: 
CPF: 
Endereço: 
Email: 
Telefone: 
Data do Evento: 
Hora de Início: 
Local do Evento: 
Pacote Festa Infantil: 
Duração (horas): 4
Forma de Pagamento: 
Autoriza uso de imagem: Sim`;
                    break;
                case '2': // Casamento
                    weddingPackageSection.classList.remove('hidden');
                    packageTextarea.required = false;
                     template = `Tipo de Contrato: Casamento
Nome Completo: 
CPF: 
Endereço: 
Email: 
Telefone: 
Data do Evento: 
Hora de Início: 
Local do Evento: 
Pacote de Casamento: 
Duração (horas): 08 horas
Forma de Pagamento: Entrada e o restante dividido.
Autoriza uso de imagem: Sim`;
                    break;
                case '3': // Casamento Civil
                    civilPackageSection.classList.remove('hidden');
                    packageTextarea.required = false;
                    template = `Tipo de Contrato: Casamento Civil
Nome Completo: 
CPF: 
Endereço: 
Email: 
Telefone: 
Data do Evento: 
Hora de Início: 
Local do Evento: 
Pacote Casamento Civil: 
Duração (horas): 
Forma de Pagamento: 
Autoriza uso de imagem: Sim`;
                    break;
                case '4': // Eventos em Geral
                    template = `Tipo de Contrato: Eventos em Geral
Nome Completo: 
CPF: 
Endereço: 
Email: 
Telefone: 
Data do Evento: 
Hora de Início: 
Local do Evento: 
Duração (horas): 
Descrição do Serviço: 
Forma de Pagamento: 
Autoriza uso de imagem: Sim`;
                    break;
                case '5': // Entrada de Dados
                    eventDetails.classList.add('hidden');
                    template = `Tipo de Contrato: Entrada de Dados
Nome Completo: 
CPF: 
Endereço: 
Email: 
Telefone: 
Descrição do Serviço: `;
                    break;
                case '6': // Formatura Infantil
                    formaturaPackageSection.classList.remove('hidden');
                    formaturaStudentDetails.classList.remove('hidden');
                    clientNameLabel.textContent = 'Nome do Pai ou Mãe (Responsável)';
                    document.getElementById('clientName').placeholder = 'Nome do Pai ou Mãe';
                    packageTextarea.required = false;
                    document.querySelector('label[for="eventDate"]').textContent = 'Data do Evento Principal (Baile)';
                    template = `Tipo de Contrato: Formatura Infantil
Nome do Pai ou Mãe: 
CPF: 
Email: 
Telefone: 
Nome do Formando(a): 
Turma: 
Endereço: 
Pacote Formatura Infantil: 
Forma de Pagamento: 
Autoriza uso de imagem: Sim`;
                    break;
            }
            quickText.value = template;
        });
        
        // Trigger change on load to set initial quick text
        document.getElementById('contractType').dispatchEvent(new Event('change'));


        // Preencher valor do contrato ao selecionar pacote de casamento
        document.getElementById('weddingPackage').addEventListener('change', (e) => {
            const packageValue = e.target.value;
            const valueInput = document.getElementById('value');
            let totalValue = '';

            switch (packageValue) {
                case 'AMOR ETERNO (4x de R$ 1.050,00)':
                    totalValue = '4200.00';
                    break;
                case 'ALIANÇAS DOURADAS (4x de R$ 925,00)':
                    totalValue = '3700.00';
                    break;
                case 'LUA DE MEL (3x de R$ 950,00)':
                    totalValue = '2850.00';
                    break;
                case 'MEMÓRIAS (3x de R$ 800,00)':
                    totalValue = '2400.00';
                    break;
            }
            valueInput.value = totalValue;
        });
        
        // Preencher valor do contrato ao selecionar pacote infantil
        document.getElementById('infantilPackage').addEventListener('change', (e) => {
            const packageValue = e.target.value;
            const valueInput = document.getElementById('value');
            let totalValue = '';

            switch (packageValue) {
                case 'Diamante (4x de R$ 650,00)':
                    totalValue = '2600.00';
                    break;
                case 'Ouro (3x de R$ 600,00)':
                    totalValue = '1800.00';
                    break;
                case 'Prata (2x de R$ 600,00)':
                    totalValue = '1200.00';
                    break;
                case 'Bronze (2x de R$ 550,00)':
                    totalValue = '1100.00';
                    break;
            }
            valueInput.value = totalValue;
        });
        
        // Preencher valor do contrato ao selecionar pacote de casamento civil
        document.getElementById('civilPackage').addEventListener('change', (e) => {
            const packageValue = e.target.value;
            const valueInput = document.getElementById('value');
            let totalValue = '';

            switch (packageValue) {
                case 'Tradicional (2x de R$ 600,00)':
                    totalValue = '1200.00';
                    break;
                case 'Premium (2x de R$ 750,00)':
                    totalValue = '1500.00';
                    break;
                case 'Super Premium (3x de R$ 800,00)':
                    totalValue = '2400.00';
                    break;
            }
            valueInput.value = totalValue;
        });
        
         // Preencher valor do contrato ao selecionar pacote de formatura infantil
        document.getElementById('formaturaPackage').addEventListener('change', (e) => {
            const packageValue = e.target.value;
            const valueInput = document.getElementById('value');
            let totalValue = '';

            switch (packageValue) {
                case 'Dei Bambini (4x de R$ 649,00)':
                    totalValue = '2596.00';
                    break;
                case 'Nana Coc (4x de R$ 499,00)':
                    totalValue = '1996.00';
                    break;
                case 'Lepetit (4x de R$ 499,00)':
                    totalValue = '1996.00';
                    break;
                case 'ABC (4x de R$ 299,00)':
                    totalValue = '1196.00';
                    break;
            }
            valueInput.value = totalValue;
        });


        // Lógica de submissão do formulário
        generateButton.addEventListener('click', () => {
            if (activeTab === 'text') {
                parseQuickTextData();
            }
            
            if (activeTab === 'form' && !contractForm.checkValidity()) {
                contractForm.reportValidity();
                outputSection.classList.remove('hidden');
                contractOutput.innerHTML = `<h1>Erro na Validação</h1><p style="text-align: center; color: red;">Por favor, preencha todos os campos obrigatórios no formulário detalhado.</p>`;
                return;
            }

            const data = getFormData();

            if (!data.contractType) {
                outputSection.classList.remove('hidden');
                contractOutput.innerHTML = `<h1>Erro na Geração</h1><p style="text-align: center; color: red;">O "Tipo de Contrato" é um campo obrigatório. Por favor, selecione uma opção para continuar.</p>`;
                return;
            }

            const contractText = generateContractText(data);
            contractOutput.innerHTML = contractText;
            outputSection.classList.remove('hidden');
            window.scrollTo({ top: outputSection.offsetTop - 20, behavior: 'smooth' });
        });

        function getFormData() {
            const data = {};
            const fields = [
                'contractType', 'eventDate', 'eventTime', 'eventDuration', 'eventLocal', 'package', 'value', 'paymentMethod', 'rules',
                'clientName', 'clientCPF', 'clientRG',
                'clientAddress', 'clientEmail', 'clientPhone', 'imageRights', 
                'weddingPackage', 'infantilPackage', 'civilPackage', 'formaturaPackage',
                'studentName', 'studentClass'
            ];
            fields.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                   data[id] = element.type === 'checkbox' ? element.checked : element.value;
                }
            });
            return data;
        }

        function parseQuickTextData() {
            const text = document.getElementById('quickText').value;
            const lines = text.split('\n');
            const keyMap = {
                'tipo de contrato': 'contractType',
                'data do evento': 'eventDate',
                'hora de início': 'eventTime',
                'duração (horas)': 'eventDuration',
                'local do evento': 'eventLocal',
                'descrição do serviço': 'package',
                'observações / itens adicionais': 'package',
                'pacote de casamento': 'weddingPackage',
                'pacote festa infantil': 'infantilPackage',
                'pacote casamento civil': 'civilPackage',
                'pacote formatura infantil': 'formaturaPackage',
                'valor do contrato': 'value',
                'forma de pagamento': 'paymentMethod',
                'regras adicionais': 'rules',
                'nome completo': 'clientName',
                'nome do pai ou mãe': 'clientName',
                'cpf': 'clientCPF',
                'rg': 'clientRG',
                'endereço': 'clientAddress',
                'email': 'clientEmail',
                'e-mail': 'clientEmail',
                'telefone': 'clientPhone',
                'autoriza uso de imagem': 'imageRights',
                'nome do formando(a)': 'studentName',
                'turma': 'studentClass'
            };

            lines.forEach(line => {
                const parts = line.split(':');
                if (parts.length > 1) {
                    const key = parts[0].trim().toLowerCase();
                    const value = parts.slice(1).join(':').trim();
                    if (keyMap[key]) {
                        const fieldId = keyMap[key];
                        let finalValue = value;
                        
                        const element = document.getElementById(fieldId);
                        if (!element) return;

                        if (key === 'autoriza uso de imagem') {
                            finalValue = value.toLowerCase() === 'sim';
                            element.checked = finalValue;
                        } else if (key === 'tipo de contrato') {
                            const type = value.toLowerCase();
                            if(type.includes('festa infantil')) finalValue = '1';
                            else if(type.includes('formatura infantil')) finalValue = '6';
                            else if(type.includes('casamento civil')) finalValue = '3';
                            else if(type.includes('casamento')) finalValue = '2';
                            else if(type.includes('geral')) finalValue = '4';
                            else if(type.includes('dados')) finalValue = '5';
                            element.value = finalValue;
                            element.dispatchEvent(new Event('change'));
                        } else {
                            element.value = finalValue;
                            // Disparar evento de change para os selects de pacote para atualizar o valor
                            if (fieldId.includes('Package')) {
                                element.dispatchEvent(new Event('change'));
                            }
                        }
                    }
                }
            });
        }
        
        function createSignature(name, doc) {
            return `<div class="signature-section">
                        <div class="signature-line"></div>
                        <p class="signature-name">${name}</p>
                        <p class="signature-doc">${doc}</p>
                    </div>`;
        }

        function generateContractText(data) {
            if (data.contractType === '1') return generateInfantilContract(data);
            if (data.contractType === '2') return generateWeddingContract(data);
            if (data.contractType === '3') return generateCivilContract(data);
            if (data.contractType === '6') return generateFormaturaContract(data);
            
            // Lógica para outros contratos
            return generateGenericContract(data);
        }

        function generateGenericContract(data) {
            const today = new Date();
            const city = "Imperatriz";
            const contractor = {
                name: "Wilkson Albuquerque Carvalho",
                cpf: "646.660.003-30",
                address: "Rua das Araras, 11, Imperatriz - MA",
                email: "wilkson@gmail.com",
                phone: "(99) 99111-1456"
            };
            const clientName = data.clientName || '[Nome do Cliente]';
            const clientCPF = data.clientCPF || '[CPF]';

            let title = 'CONTRATO DE PRESTAÇÃO DE SERVIÇOS';
            if (data.contractType === '4') title = 'CONTRATO DE PRESTAÇÃO DE SERVIÇOS PARA EVENTOS EM GERAL';
            if (data.contractType === '5') title = 'CONTRATO DE PRESTAÇÃO DE SERVIÇOS DE ENTRADA DE DADOS';

            let objectClause = `<p>O objeto do presente contrato é a prestação de serviços de ${data.package || '[Descrição do Serviço]'}.</p>`;

            return `
                <h1>${title}</h1>
                <h2>PARTES</h2>
                <p><strong>CONTRATANTE:</strong> ${clientName}, portador(a) do CPF nº ${clientCPF}, residente e domiciliado(a) em ${data.clientAddress || '[Endereço]'}.</p>
                <p><strong>CONTRATADO:</strong> ${contractor.name}, fotógrafo, portador do CPF nº ${contractor.cpf}, com endereço profissional em ${contractor.address}.</p>
                
                <h2>CLÁUSULA 1ª – DO OBJETO</h2>
                ${objectClause}
                
                <h2>CLÁUSULA 2ª – DO VALOR E PAGAMENTO</h2>
                <p>O valor total deste contrato é de R$ ${parseFloat(data.value || 0).toFixed(2)}, a ser pago da seguinte forma: ${data.paymentMethod || '[Forma de Pagamento]'}.</p>
                
                ${data.rules ? `<h2>CLÁUSULA 3ª - REGRAS ADICIONAIS</h2><p>${data.rules}</p>` : ''}
                
                <p class="date-location">${city}/MA, ${today.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}.</p>
                
                ${createSignature(clientName, `CPF: ${clientCPF}`)}
                ${createSignature(contractor.name, `CPF: ${contractor.cpf}`)}
            `;
        }

        function generateFormaturaContract(data) {
            const today = new Date();
            const city = "Imperatriz";
            const contractor = {
                name: "Wilkson Albuquerque Carvalho",
                cpf: "646.660.003-30",
                address: "Rua das Araras, 11, Imperatriz - MA",
                email: "wilkson@gmail.com",
                phone: "(99) 99111-1456"
            };
            const clientName = data.clientName || '[Nome do Pai ou Mãe]';
            const clientCPF = data.clientCPF || '[CPF]';

            const imageRightsClause = data.imageRights ? 
                '<p><strong>6.1.</strong> O(A) CONTRATANTE autoriza o CONTRATADO a utilizar as fotografias oriundas deste contrato em seu portfólio (físico e online), redes sociais, site, concursos fotográficos e exposições, com o objetivo de divulgar seu trabalho, sem que isso acarrete qualquer ônus.</p>' :
                '<p><strong>6.1.</strong> O(A) CONTRATANTE NÃO AUTORIZA o CONTRATADO a utilizar as fotografias em seu portfólio, redes sociais ou qualquer meio de divulgação.</p>';

            const packageSelection = data.formaturaPackage ? `<p><strong>Pacote Selecionado:</strong> ${data.formaturaPackage}</p>` : '';
            const observations = data.package ? `<p><strong>Observações Adicionais:</strong> ${data.package}</p>` : '';
            
            let deliverables = '';
            switch (data.formaturaPackage) {
                case 'Dei Bambini (4x de R$ 649,00)':
                    deliverables = `<p>a) Álbum 20x30 com 28 páginas e estojo em madeira personalizado.<br>b) 80 (oitenta) fotos editadas.<br>c) Pen drive personalizado.<br>d) Vídeo geral do baile (brinde).</p>`;
                    break;
                case 'Nana Coc (4x de R$ 499,00)':
                    deliverables = `<p>a) Álbum 20x30 com 24 páginas e estojo tradicional.<br>b) 70 (setenta) fotos editadas.<br>c) Pen drive.<br>d) Vídeo geral do baile (brinde).</p>`;
                    break;
                case 'Lepetit (4x de R$ 499,00)':
                     deliverables = `<p>a) Álbum 20x30 com 20 páginas e estojo tradicional.<br>b) 60 (sessenta) fotos editadas.<br>c) Pen drive.<br>d) Vídeo geral do baile (brinde).</p>`;
                    break;
                case 'ABC (4x de R$ 299,00)':
                    deliverables = `<p>a) 50 (cinquenta) fotos editadas.<br>b) Vídeo geral do baile (brinde).<br>c) Fotos entregues via galeria online.</p>`;
                    break;
                default:
                    deliverables = `<p>a) [Itens a serem entregues não especificados - selecione um pacote].</p>`;
            }

             return `
                <h1>CONTRATO DE PRESTAÇÃO DE SERVIÇOS FOTOGRÁFICOS – FORMATURA INFANTIL</h1>
                <h2>PARTES</h2>
                <p><strong>CONTRATANTE:</strong> ${clientName}, portador(a) do CPF nº ${clientCPF} e RG nº ${data.clientRG || '[RG]'}, residente e domiciliado(a) em ${data.clientAddress || '[Endereço]'}, responsável legal pelo(a) formando(a) <strong>${data.studentName || '[Nome do Formando(a)]'}</strong>, doravante denominado(a) CONTRATANTE.</p>
                <p><strong>CONTRATADO:</strong> ${contractor.name}, fotógrafo, portador do CPF nº ${contractor.cpf}, com endereço profissional em ${contractor.address}, e-mail: ${contractor.email}, telefone: ${contractor.phone}, doravante denominado CONTRATADO.</p>
                
                <h2>CLÁUSULA 1ª – DO OBJETO</h2>
                <p><strong>1.1.</strong> O presente contrato tem por objeto a prestação de serviços de cobertura fotográfica dos eventos relacionados à formatura infantil do(a) aluno(a) <strong>${data.studentName || '[Nome do Formando(a)]'}</strong>, da turma ${data.studentClass || '[Turma]'}.</p>
                <p><strong>1.2.</strong> O serviço contratado compreende a cobertura dos seguintes eventos: Aula da Saudade, Noite do Pijama, Fotos para Convite e o Baile de Formatura.</p>
                
                <h2>CLÁUSULA 2ª – DO PACOTE E ENTREGA DO MATERIAL</h2>
                <p><strong>2.1.</strong> O material a ser entregue pelo CONTRATADO ao(à) CONTRATANTE consiste em:</p>
                ${packageSelection}
                ${deliverables}
                ${observations}
                <p><strong>2.2.</strong> O prazo para entrega do material digital é de até 60 (sessenta) dias úteis, contados a partir da data do último evento (Baile de Formatura).</p>
                <p><strong>2.3.</strong> Fica expressamente acordado que os arquivos brutos (formato RAW) não serão entregues em nenhuma hipótese.</p>
                
                <h2>CLÁUSULA 3ª – DAS OBRIGAÇÕES</h2>
                <p><strong>3.1.</strong> Compete ao CONTRATADO: prestar o serviço com zelo, respeitar os horários e locais definidos pela comissão de formatura/escola e realizar o backup seguro dos arquivos por um período de 12 (doze) meses.</p>
                <p><strong>3.2.</strong> Compete ao CONTRATANTE: realizar os pagamentos nas datas e valores acordados e zelar para que o(a) formando(a) compareça aos eventos programados para a cobertura fotográfica.</p>
                
                <h2>CLÁUSULA 4ª – DO VALOR E FORMA DE PAGAMENTO</h2>
                <p><strong>4.1.</strong> O valor total deste contrato é de R$ ${parseFloat(data.value || 0).toFixed(2)}.</p>
                <p><strong>4.2.</strong> O pagamento será realizado da seguinte forma: ${data.paymentMethod || '[Forma de Pagamento]'}.</p>
                
                <h2>CLÁUSULA 5ª – DO CANCELAMENTO</h2>
                <p><strong>5.1.</strong> Em caso de rescisão por parte do(a) CONTRATANTE, será retido o valor equivalente a 30% do total do contrato a título de multa e despesas administrativas. Valores já pagos que excedam a multa serão devolvidos.</p>

                <h2>CLÁUSULA 6ª – DO DIREITO DE USO DE IMAGEM</h2>
                ${imageRightsClause}

                <h2>CLÁUSULA 7ª – DO FORO</h2>
                <p><strong>7.1.</strong> Fica eleito o foro da Comarca de Imperatriz, Estado do Maranhão, para dirimir quaisquer dúvidas oriundas do presente contrato.</p>
                
                <p class="date-location">${city}/MA, ${today.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}.</p>
                
                ${createSignature(clientName, `CPF: ${clientCPF}`)}
                ${createSignature(contractor.name, `CPF: ${contractor.cpf}`)}
            `;
        }
        
        function generateCivilContract(data) {
            const today = new Date();
            const city = "Imperatriz";
            const contractor = {
                name: "Wilkson Albuquerque Carvalho",
                cpf: "646.660.003-30",
                address: "Rua das Araras, 11, Imperatriz - MA",
                email: "wilkson@gmail.com",
                phone: "(99) 99111-1456"
            };
            const clientName = data.clientName || '[Nome do Cliente]';
            const clientCPF = data.clientCPF || '[CPF]';

            const eventDateFormatted = data.eventDate ? new Date(data.eventDate).toLocaleDateString('pt-BR', {timeZone: 'UTC'}) : '[Data do Evento]';
            const startTime = data.eventTime || '[Hora de Início]';
            
            const imageRightsClause = data.imageRights ? 
                '<p><strong>6.1.</strong> O(A) CONTRATANTE autoriza o CONTRATADO a utilizar as fotografias oriundas deste contrato em seu portfólio (físico e online), redes sociais, site, concursos fotográficos e exposições, com o objetivo de divulgar seu trabalho, sem que isso acarrete qualquer ônus.</p>' :
                '<p><strong>6.1.</strong> O(A) CONTRATANTE NÃO AUTORIZA o CONTRATADO a utilizar as fotografias em seu portfólio, redes sociais ou qualquer meio de divulgação.</p>';

            const packageSelection = data.civilPackage ? `<p><strong>Pacote Selecionado:</strong> ${data.civilPackage}</p>` : '';
            const observations = data.package ? `<p><strong>Observações Adicionais:</strong> ${data.package}</p>` : '';
            
            let deliverables = '';
            switch (data.civilPackage) {
                case 'Tradicional (2x de R$ 600,00)':
                    deliverables = `<p>a) 50 (cinquenta) fotos editadas.<br>b) Entrega via galeria online.</p>`;
                    break;
                case 'Premium (2x de R$ 750,00)':
                    deliverables = `<p>a) Todas as fotos do evento editadas em alta resolução.<br>b) Pen drive personalizado.<br>c) Caixa personalizada.</p>`;
                    break;
                case 'Super Premium (3x de R$ 800,00)':
                    deliverables = `<p>a) Todas as fotos do evento em alta resolução.<br>b) Pen drive personalizado.<br>c) Caixa personalizada.<br>d) Álbum 20x30 com 20 páginas.</p>`;
                    break;
                default:
                    deliverables = `<p>a) [Itens a serem entregues não especificados - selecione um pacote].</p>`;
            }

            return `
                <h1>CONTRATO DE PRESTAÇÃO DE SERVIÇOS FOTOGRÁFICOS – CASAMENTO CIVIL</h1>
                <h2>PARTES</h2>
                <p><strong>CONTRATANTE:</strong> ${clientName}, portador(a) do CPF nº ${clientCPF} e RG nº ${data.clientRG || '[RG]'}, residente e domiciliado(a) em ${data.clientAddress || '[Endereço]'}, doravante denominado(a) CONTRATANTE.</p>
                <p><strong>CONTRATADO:</strong> ${contractor.name}, fotógrafo, portador do CPF nº ${contractor.cpf}, com endereço profissional em ${contractor.address}, e-mail: ${contractor.email}, telefone: ${contractor.phone}, doravante denominado CONTRATADO.</p>
                
                <h2>CLÁUSULA 1ª – DO OBJETO</h2>
                <p><strong>1.1.</strong> O presente contrato tem por objeto a prestação de serviços de cobertura fotográfica da cerimônia de casamento civil e/ou recepção do(a) CONTRATANTE, a ser realizado(a) em ${eventDateFormatted}.</p>
                <p><strong>1.2.</strong> O serviço contratado compreende a cobertura fotográfica por ${data.eventDuration || '[Nº]'} horas consecutivas, a partir das ${startTime}, incluindo os principais momentos do evento, como a cerimônia no cartório/local, fotos protocolares com familiares e padrinhos, e a recepção (se houver).</p>
                
                <h2>CLÁUSULA 2ª – DO PACOTE E ENTREGA DO MATERIAL</h2>
                ${packageSelection}
                ${deliverables}
                ${observations}
                <p><strong>2.2.</strong> O prazo para entrega da galeria online para seleção (se aplicável) e/ou entrega final do material digital é de até 30 (trinta) dias úteis, contados a partir do primeiro dia útil após a data do evento.</p>
                <p><strong>2.3.</strong> Fica expressamente acordado que os arquivos brutos (formato RAW) não serão entregues em nenhuma hipótese.</p>
                
                <h2>CLÁUSULA 3ª – DAS OBRIGAÇÕES</h2>
                <p><strong>3.1.</strong> Compete ao CONTRATADO: prestar o serviço com zelo, respeitar os horários acordados e realizar o backup seguro dos arquivos por um período de 12 (doze) meses.</p>
                <p><strong>3.2.</strong> Compete ao CONTRATANTE: realizar os pagamentos, fornecer as condições necessárias para a execução do trabalho e informar sobre momentos específicos que deseje registrar.</p>

                <h2>CLÁUSULA 4ª – DO VALOR E FORMA DE PAGAMENTO</h2>
                <p><strong>4.1.</strong> O valor total deste contrato é de R$ ${parseFloat(data.value || 0).toFixed(2)}.</p>
                <p><strong>4.2.</strong> O pagamento será realizado da seguinte forma: ${data.paymentMethod || '[Forma de Pagamento]'}.</p>
                
                <h2>CLÁUSULA 5ª – DA REMARCAÇÃO E CANCELAMENTO</h2>
                <p><strong>5.1.</strong> Remarcação pelo CONTRATANTE: Deve ser solicitada por escrito com no mínimo 30 dias de antecedência e a nova data estará sujeita à disponibilidade na agenda do CONTRATADO.</p>
                <p><strong>5.2.</strong> Cancelamento pelo CONTRATANTE (Rescisão): Em caso de rescisão, o valor do sinal será retido a título de multa. Se o cancelamento ocorrer com menos de 30 dias de antecedência, a multa será de 50% do valor total do contrato.</p>
                <p><strong>5.3.</strong> Impossibilidade do CONTRATADO: Em caso de força maior, o CONTRATADO enviará um substituto qualificado ou, se não for possível, devolverá integralmente os valores pagos.</p>

                <h2>CLÁUSULA 6ª – DO DIREITO DE USO DE IMAGEM</h2>
                ${imageRightsClause}

                <h2>CLÁUSULA 7ª – DO FORO</h2>
                <p><strong>7.1.</strong> Fica eleito o foro da Comarca de Imperatriz, Estado do Maranhão, para dirimir quaisquer dúvidas oriundas do presente contrato.</p>
                
                <p class="date-location">${city}/MA, ${today.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}.</p>
                
                ${createSignature(clientName, `CPF: ${clientCPF}`)}
                ${createSignature(contractor.name, `CPF: ${contractor.cpf}`)}
            `;
        }

        function generateInfantilContract(data) {
            const today = new Date();
            const city = "Imperatriz";
            const contractor = {
                name: "Wilkson Albuquerque Carvalho",
                cpf: "646.660.003-30",
                address: "Rua das Araras, 11, Imperatriz - MA",
                email: "wilkson@gmail.com",
                phone: "(99) 99111-1456"
            };
            const clientName = data.clientName || '[Nome do Cliente]';
            const clientCPF = data.clientCPF || '[CPF]';

            const eventDateFormatted = data.eventDate ? new Date(data.eventDate).toLocaleDateString('pt-BR', {timeZone: 'UTC'}) : '[Data do Evento]';
            const startTime = data.eventTime || '[Hora de Início]';
            let endTime = '[Hora de Término]';
            if(data.eventTime && data.eventDuration) {
                const [hours, minutes] = data.eventTime.split(':').map(Number);
                const startDateTime = new Date();
                startDateTime.setHours(hours, minutes, 0, 0);
                startDateTime.setHours(startDateTime.getHours() + Number(data.eventDuration));
                endTime = startDateTime.toTimeString().substring(0,5);
            }

            const imageRightsClause = data.imageRights ? 
                '<p><strong>6.1.</strong> O(A) CONTRATANTE autoriza o CONTRATADO a utilizar as fotografias oriundas deste contrato em seu portfólio (físico e online), redes sociais, site, concursos fotográficos e exposições, com o objetivo de divulgar seu trabalho, sem que isso acarrete qualquer ônus.</p>' :
                '<p><strong>6.1.</strong> O(A) CONTRATANTE NÃO AUTORIZA o CONTRATADO a utilizar as fotografias em seu portfólio, redes sociais ou qualquer meio de divulgação.</p>';

            const packageSelection = data.infantilPackage ? `<p><strong>Pacote Selecionado:</strong> ${data.infantilPackage}</p>` : '';
            const observations = data.package ? `<p><strong>Observações Adicionais:</strong> ${data.package}</p>` : '';
            
            let deliverables = '';
            switch (data.infantilPackage) {
                case 'Diamante (4x de R$ 650,00)':
                    deliverables = `<p>a) 20 (vinte) fotos do ensaio.<br>b) Todas as fotos do evento em alta resolução.<br>c) Pequeno vídeo para Reels (captado por celular).<br>d) Álbum 20x30 com 28 páginas e estojo.<br>e) Pen drive personalizado.</p>`;
                    break;
                case 'Ouro (3x de R$ 600,00)':
                    deliverables = `<p>a) Todas as fotos do evento em alta resolução.<br>b) Álbum 20x30 com 20 páginas e estojo.<br>c) Pen drive personalizado.</p>`;
                    break;
                case 'Prata (2x de R$ 600,00)':
                    deliverables = `<p>a) Todas as fotos do evento em alta resolução.<br>b) Pen drive personalizado.</p>`;
                    break;
                case 'Bronze (2x de R$ 550,00)':
                    deliverables = `<p>a) 100 (cem) fotos da festa.<br>b) Fotos entregues via galeria online.</p>`;
                    break;
                default:
                    deliverables = `<p>a) [Itens a serem entregues não especificados - selecione um pacote].</p>`;
            }

            return `
                <h1>CONTRATO DE PRESTAÇÃO DE SERVIÇOS FOTOGRÁFICOS – EVENTO INFANTIL</h1>
                <h2>PARTES</h2>
                <p><strong>CONTRATANTE:</strong> ${clientName}, portador(a) do CPF nº ${clientCPF} e RG nº ${data.clientRG || '[RG]'}, residente e domiciliado(a) em ${data.clientAddress || '[Endereço]'}, doravante denominado(a) CONTRATANTE.</p>
                <p><strong>CONTRATADO:</strong> ${contractor.name}, fotógrafo, portador do CPF nº ${contractor.cpf}, com endereço profissional em ${contractor.address}, e-mail: ${contractor.email}, telefone: ${contractor.phone}, doravante denominado CONTRATADO.</p>
                
                <h2>CLÁUSULA 1ª – DO OBJETO</h2>
                <p><strong>1.1.</strong> O presente contrato tem por objeto a prestação de serviços de cobertura fotográfica da festa infantil a ser realizada em ${eventDateFormatted}.</p>
                <p><strong>1.2.</strong> O serviço contratado compreende a cobertura fotográfica por ${data.eventDuration || '[Nº]'} horas consecutivas, com início às ${startTime} e término às ${endTime}, incluindo os principais momentos do evento, como a recepção dos convidados, decoração, brincadeiras, o momento do "Parabéns" e fotos com familiares.</p>

                <h2>CLÁUSULA 2ª – DO PACOTE E ENTREGA DO MATERIAL</h2>
                ${packageSelection}
                ${deliverables}
                ${observations}
                <p><strong>2.2.</strong> O prazo para entrega do material digital é de até 60 (sessenta) dias úteis, contados a partir do primeiro dia útil após a data do evento.</p>
                <p><strong>2.3.</strong> Fica expressamente acordado que os arquivos brutos (formato RAW) não serão entregues em nenhuma hipótese.</p>
                
                <h2>CLÁUSULA 3ª – DAS OBRIGAÇÕES</h2>
                <p><strong>3.1.</strong> Compete ao CONTRATADO: prestar o serviço com zelo, utilizar equipamento profissional adequado, respeitar os horários acordados e realizar o backup seguro dos arquivos por um período de 12 (doze) meses.</p>
                <p><strong>3.2.</strong> Compete ao CONTRATANTE: realizar os pagamentos nas datas acordadas, fornecer as condições necessárias para a execução do trabalho e informar sobre momentos específicos de interesse.</p>
                
                <h2>CLÁUSULA 4ª – DO VALOR E FORMA DE PAGAMENTO</h2>
                <p><strong>4.1.</strong> O valor total deste contrato é de R$ ${parseFloat(data.value || 0).toFixed(2)}.</p>
                <p><strong>4.2.</strong> O pagamento será realizado da seguinte forma: ${data.paymentMethod || '[Forma de Pagamento]'}.</p>
                
                <h2>CLÁUSULA 5ª – DA REMARCAÇÃO E CANCELAMENTO</h2>
                <p><strong>5.1.</strong> A solicitação de remarcação deve ser feita por escrito com no mínimo 30 dias de antecedência e a nova data estará sujeita à disponibilidade na agenda do CONTRATADO.</p>
                <p><strong>5.2.</strong> Em caso de rescisão por parte do(a) CONTRATANTE, será retido o valor do sinal a título de multa. Se o cancelamento ocorrer com menos de 30 dias de antecedência, a multa será de 50% do valor total do contrato.</p>
                <p><strong>5.3.</strong> Na eventualidade de o CONTRATADO não poder comparecer por motivo de força maior, ele se compromete a enviar outro fotógrafo qualificado. Caso não seja possível, o contrato será rescindido e todos os valores pagos serão devolvidos integralmente.</p>

                <h2>CLÁUSULA 6ª – DO DIREITO DE USO DE IMAGEM</h2>
                ${imageRightsClause}

                <h2>CLÁUSULA 7ª – DO FORO</h2>
                <p><strong>7.1.</strong> Fica eleito o foro da Comarca de Imperatriz, Estado do Maranhão, para dirimir quaisquer dúvidas oriundas do presente contrato.</p>

                <p class="date-location">${city}/MA, ${today.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}.</p>
                
                ${createSignature(clientName, `CPF: ${clientCPF}`)}
                ${createSignature(contractor.name, `CPF: ${contractor.cpf}`)}
                `;
        }

        function generateWeddingContract(data) {
            const today = new Date();
            const city = "Imperatriz";
            const contractor = {
                name: "Wilkson Albuquerque Carvalho",
                cpf: "646.660.003-30",
                address: "Rua das Araras, 11, Imperatriz - MA",
                email: "wilkson@gmail.com",
                phone: "(99) 99111-1456"
            };
            const clientName = data.clientName || '[Nome do Cliente]';
            const clientCPF = data.clientCPF || '[CPF]';

            const eventDateFormatted = data.eventDate ? new Date(data.eventDate).toLocaleDateString('pt-BR', {timeZone: 'UTC'}) : '[Data do Evento]';
            const startTime = data.eventTime || '[Hora de Início]';
            let endTime = '[Hora de Término]';
            if(data.eventTime && data.eventDuration) {
                const [hours, minutes] = data.eventTime.split(':').map(Number);
                const startDateTime = new Date();
                startDateTime.setHours(hours, minutes, 0, 0);
                startDateTime.setHours(startDateTime.getHours() + Number(data.eventDuration));
                endTime = startDateTime.toTimeString().substring(0,5);
            }

            const imageRightsClause = data.imageRights ? 
                '<p><strong>6.1.</strong> O(A) CONTRATANTE autoriza o CONTRATADO a utilizar as fotografias oriundas deste contrato em seu portfólio (físico e online), redes sociais, site, concursos fotográficos e exposições, com o objetivo de divulgar seu trabalho, sem que isso acarrete qualquer ônus.</p>' :
                '<p><strong>6.1.</strong> O(A) CONTRATANTE NÃO AUTORIZA o CONTRATADO a utilizar as fotografias em seu portfólio, redes sociais ou qualquer meio de divulgação.</p>';

            const packageSelection = data.weddingPackage ? `<p><strong>Pacote Selecionado:</strong> ${data.weddingPackage}</p>` : '';
            const observations = data.package ? `<p><strong>Observações Adicionais:</strong> ${data.package}</p>` : '';
            
            let deliverables = '';
            switch (data.weddingPackage) {
                case 'AMOR ETERNO (4x de R$ 1.050,00)':
                    deliverables = `<p>a) Cobertura especial para Reels por um Story Maker Profissional.<br>b) Álbum 30x30 com estojo em madeira personalizado.<br>c) Pôster 30x45.<br>d) 30 (trinta) fotos do ensaio pré-casamento.<br>e) Todas as fotos do evento em alta resolução.<br>f) Cobertura do making of da noiva.<br>g) Cobertura completa da cerimônia e recepção.<br>h) Pen drive personalizado.</p>`;
                    break;
                case 'ALIANÇAS DOURADAS (4x de R$ 925,00)':
                    deliverables = `<p>a) Cobertura especial para Reels por um Story Maker Profissional.<br>b) Álbum 20x30 com estojo tradicional.<br>c) 25 (vinte e cinco) fotos do ensaio pré-casamento.<br>d) Todas as fotos do evento em alta resolução.<br>e) Cobertura do making of da noiva.<br>f) Cobertura completa da cerimônia e recepção.<br>g) Pen drive.</p>`;
                    break;
                case 'LUA DE MEL (3x de R$ 950,00)':
                    deliverables = `<p>a) Cobertura com dois fotógrafos.<br>b) 20 (vinte) fotos do ensaio pré-casamento.<br>c) Todas as fotos do evento em alta resolução.<br>d) Cobertura do making of da noiva.<br>e) Cobertura completa da cerimônia e recepção.<br>f) Pen drive.</p>`;
                    break;
                case 'MEMÓRIAS (3x de R$ 800,00)':
                    deliverables = `<p>a) Cobertura com dois fotógrafos.<br>b) Todas as fotos do evento em alta resolução.<br>c) Cobertura do making of da noiva.<br>d) Cobertura completa da cerimônia e recepção.</p>`;
                    break;
                default:
                    deliverables = `<p>a) [Itens a serem entregues não especificados - selecione um pacote].</p>`;
            }


            return `
                <h1>CONTRATO DE PRESTAÇÃO DE SERVIÇOS FOTOGRÁFICOS</h1>
                <h2>PARTES</h2>
                <p><strong>CONTRATANTE:</strong> ${clientName}, portador(a) do CPF nº ${clientCPF} e RG nº ${data.clientRG || '[RG]'}, residente e domiciliado(a) em ${data.clientAddress || '[Endereço]'}, doravante denominado(a) CONTRATANTE.</p>
                <p><strong>CONTRATADO:</strong> ${contractor.name}, fotógrafo, portador do CPF nº ${contractor.cpf}, com endereço profissional em ${contractor.address}, e-mail: ${contractor.email}, telefone: ${contractor.phone}, doravante denominado CONTRATADO.</p>
                
                <h2>CLÁUSULA 1ª – DO OBJETO</h2>
                <p><strong>1.1.</strong> O presente contrato tem por objeto a prestação de serviços de cobertura fotográfica do casamento do(a) CONTRATANTE, a ser realizado em ${eventDateFormatted}.</p>
                <p><strong>1.2.</strong> O serviço contratado compreende a cobertura fotográfica por ${data.eventDuration || '[Nº]'} horas consecutivas, com início às ${startTime} e término às ${endTime}, e incluirá os seguintes momentos: making of, cerimônia, recepção, fotos oficiais do casal, fotos com os convidados na mesa do bolo e o lançamento do buquê.</p>
                <p><strong>1.3.</strong> O serviço será realizado por 2 (dois) fotógrafos.</p>
                
                <h2>CLÁUSULA 2ª – DO PACOTE E ENTREGA DO MATERIAL</h2>
                ${packageSelection}
                ${deliverables}
                ${observations}
                <p><strong>2.2.</strong> O prazo para entrega da galeria online com as fotos do casamento é de até 90 (noventa) dias úteis, contados a partir do primeiro dia útil após a data do evento.</p>
                <p><strong>2.3.</strong> Fica expressamente acordado que os arquivos brutos (formato RAW) não serão entregues em nenhuma hipótese.</p>
                
                <h2>CLÁUSULA 3ª – DAS OBRIGAÇÕES</h2>
                <p><strong>3.1.</strong> Compete ao CONTRATADO: prestar o serviço com zelo, respeitar os horários acordados, e realizar o backup seguro dos arquivos por um período de 12 (doze) meses.</p>
                <p><strong>3.2.</strong> Compete ao CONTRATANTE: realizar os pagamentos, fornecer alimentação e um local seguro para os equipamentos da equipe, e informar sobre momentos específicos que deseje registrar.</p>
                
                <h2>CLÁUSULA 4ª – DO VALOR E FORMA DE PAGAMENTO</h2>
                <p><strong>4.1.</strong> O valor total deste contrato é de R$ ${parseFloat(data.value || 0).toFixed(2)}.</p>
                <p><strong>4.2.</strong> O pagamento será realizado da seguinte forma: ${data.paymentMethod || '[Forma de Pagamento]'}.</p>
                
                <h2>CLÁUSULA 5ª – DA REMARCAÇÃO E CANCELAMENTO</h2>
                <p><strong>5.1. Remarcação:</strong> A solicitação deve ser feita com no mínimo 60 dias de antecedência, e a nova data está sujeita à disponibilidade. Reajustes podem ser aplicados para datas em anos seguintes.</p>
                <p><strong>5.2. Cancelamento:</strong> Serão aplicadas multas progressivas sobre o valor total do contrato, conforme a antecedência: 20% (mais de 180 dias), 35% (entre 179 e 90 dias), ou 50% (menos de 89 dias).</p>
                <p><strong>5.3. Impossibilidade do CONTRATADO:</strong> Na rara eventualidade de o CONTRATADO não poder comparecer, ele enviará um substituto qualificado com aprovação do CONTRATANTE, ou devolverá integralmente os valores pagos com multa de 20% do valor do contrato.</p>
                
                <h2>CLÁUSULA 6ª – DO DIREITO DE USO DE IMAGEM</h2>
                ${imageRightsClause}

                <h2>CLÁUSULA 7ª – DO CASO FORTUITO OU FORÇA MAIOR</h2>
                <p><strong>7.1.</strong> Nenhuma das partes será responsabilizada pelo não cumprimento de suas obrigações por eventos de força maior (desastres naturais, pandemias, etc.), devendo a data ser remarcada em comum acordo.</p>

                <h2>CLÁUSULA 8ª – DO FORO</h2>
                <p><strong>8.1.</strong> Fica eleito o foro da Comarca de Imperatriz, Estado do Maranhão, para dirimir quaisquer dúvidas oriundas do presente contrato.</p>
                
                <p class="date-location">${city}/MA, ${today.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}.</p>
                
                ${createSignature(clientName, `CPF: ${clientCPF}`)}
                ${createSignature(contractor.name, `CPF: ${contractor.cpf}`)}
                `;
        }

        // Lógica dos botões de Ação
        document.getElementById('copyButton').addEventListener('click', () => {
            const textToCopy = contractOutput.innerText || contractOutput.textContent;
            navigator.clipboard.writeText(textToCopy).then(() => {
                const msg = document.getElementById('copySuccess');
                msg.classList.remove('hidden');
                setTimeout(() => msg.classList.add('hidden'), 3000);
            });
        });

        document.getElementById('printButton').addEventListener('click', () => {
            window.print();
        });

    </script>
</body>
</html>

